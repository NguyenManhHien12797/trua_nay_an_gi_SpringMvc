<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:svg="http://www.w3.org/2000/svg"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
</head>
<body>
	<!--  Admin-Fragment -->
	<div th:fragment="admin-nav"
		class="pt-sm-5 pb-4 pt-4 w-100 bg-white h-100 shadow-sm">
		<ul class="nav w-100 d-block">
			<li class="nav-item "
				th:class="${navRoute == 'merchant-list'} ? activeli : nav-item ">
				<a class="nav-link nav-item-hover fw-bold text-secondary"
					th:href="@{/admin/merchant-list/ACTIVE/1}"> 
			  		<i class="bi bi-shop-window"></i>Quản lý nguời bán
				</a>
			</li>
			<li class="nav-item "
				th:class="${navRoute == 'user-list'} ? activeli : nav-item ">
				<a class="nav-link nav-item-hover fw-bold text-secondary"
					th:href="@{/admin/user-list/ACTIVE/1}"> 
			  		<i class="bi bi-people-fill"></i> Quản lý người dùng
				</a>
			</li>
		</ul>
	</div>

	<h4 th:fragment="admin-merchant-sup-title" class=" mt-md-5 ms-md-5 mb-md-4 ms-3">Quản lý người bán</h4>

	<h4 th:fragment="admin-user-sup-title"  class=" mt-md-5 ms-md-5 mb-md-4 ms-3">Quản lý người dùng</h4>

	<div th:fragment="admin-nav-sup" class=" ms-md-4" style="height: 40px;">
		<ul class="nav nav-pills">
			<li th:class="${#strings.equals(status, 'PENDING')} ? active-sup-nav">
				<a class="nav-link link fw-bold text-secondary" th:href="@{/admin/__${navRoute}__/PENDING/1}"> 
					<i class="bi bi-bookmark-plus"></i> Chờ duyệt
				</a>
			</li>
			<li th:class="${#strings.equals(status, 'ACTIVE')} ? active-sup-nav">
				<a class="nav-link link fw-bold text-secondary" th:href="@{'/admin/'+${navRoute}+'/ACTIVE/1'}"> 
					<i class="bi bi-gear"></i> Đang hoạt động
				</a>
			</li>
			<li th:class="${#strings.equals(status, 'BLOCK')} ? active-sup-nav">
				<a class="nav-link link fw-bold text-secondary" th:href="@{'/admin/'+${navRoute}+'/BLOCK/1'}"> 
					<i class="bi bi-lock"></i> Đang bị khóa
				</a>
			</li>
		</ul>
	</div>

	<div th:fragment="PENDING" class="w-100">
		<div class="table-responsive" style="height: 300px" >
			<table class="table table-striped table-sm align-middle text-center">
				<thead class="align-middle">
					<tr>
						<th scope="col">Ảnh</th>
						<th scope="col">Tên</th>
						<th scope="col">Điện thoại</th>
						<th scope="col">Địa chỉ</th>
						<th scope="col" colspan="2">Hành động</th>
					</tr>
				</thead>
				<tbody class="text-center">
					<tr th:each="user : ${usersOrMechants}">
						<td><img th:src="@{${'/image/'+user.avatar}}" alt=""
							style="height: 40px; width: 40px; border-radius: 50%;"></td>
						<td class="merchant-item" th:text="${user.name}"></td>
						<td class="merchant-item" th:text="${user.phone}"></td>
						<td class="merchant-item" th:text="${user.address}"></td>
						<td class="action-icon">
							<button class="btn-action-icon bg-transparent"
								th:onclick="updateStatus([[${user.id}]],[[${navRoute}]],'ACTIVE',[[${status}]])">
								<i class="fa-solid fa-check text-success"></i>
							</button>
						</td>
						<td class="action-icon">
							<button class="btn-action-icon bg-transparent"
								th:onclick="updateStatus([[${user.id}]],[[${navRoute}]],'REFUSE',[[${status}]])">
								<i class="fa-solid fa-x text-danger"></i>
							</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="w-100 d-flex justify-content-center"
			th:each="i: ${#numbers.sequence(1,(lastPageNumber == 0 ? 1: lastPageNumber))}">
			<a th:text="${i}"
				th:href="@{/admin/__${navRoute}__/PENDING/__${i}__}" class="paging"
				th:classappend="${page == i } ? activeli"></a>
		</div>
	</div>

	<div th:fragment="ACTIVE" class="w-100">
		<div class="table-responsive" style="height: 300px">
			<table class="table table-striped table-sm align-middle text-center">
				<thead class="align-middle">
					<tr>
						<th scope="col">Ảnh</th>
						<th scope="col">Tên</th>
						<th scope="col">Điện thoại</th>
						<th scope="col">Địa chỉ</th>
						<th scope="col" colspan="2">Hành động</th>
					</tr>
				</thead>
				<tbody class="text-center">
					<tr th:each="user : ${usersOrMechants}">
						<td><img th:src="@{${'/image/'+user.avatar}}" alt=""
							style="height: 40px; width: 40px; border-radius: 50%;"></td>
						<td class="merchant-item" th:text="${user.name}"></td>
						<td class="merchant-item" th:text="${user.phone}"></td>
						<td class="merchant-item" th:text="${user.address}"></td>
						<td class="action-icon">
							<button class="btn-action-icon bg-transparent"
								th:onclick="updateStatus([[${user.id}]],[[${navRoute}]],'BLOCK',[[${status}]])">
								<i class="bi bi-lock text-danger"></i>
							</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="w-100 d-flex justify-content-center"
			th:each="i: ${#numbers.sequence(1,(lastPageNumber == 0 ? 1: lastPageNumber))}">
			<a th:text="${i}" th:href="@{/admin/__${navRoute}__/ACTIVE/__${i}__}"
				class="paging" th:classappend="${page == i } ? activeli"></a>
		</div>
	</div>

	<div th:fragment="BLOCK" class="w-100">
		<div class="table-responsive" style="height: 300px">
			<table class="table table-striped table-sm align-middle text-center">
				<thead class="align-middle">
					<tr>
						<th scope="col">Ảnh</th>
						<th scope="col">Tên</th>
						<th scope="col">Điện thoại</th>
						<th scope="col">Địa chỉ</th>
						<th scope="col" th:colspan="2">Hành động</th>
					</tr>
				</thead>
				<tbody class="text-center">
					<tr th:each="user : ${usersOrMechants}">
						<td><img th:src="@{${'/image/'+user.avatar}}" alt=""
							style="height: 40px; width: 40px; border-radius: 50%;"></td>
						<td class="merchant-item" th:text="${user.name}"></td>
						<td class="merchant-item" th:text="${user.phone}"></td>
						<td class="merchant-item" th:text="${user.address}"></td>
						<td class="action-icon">
							<button class="btn-action-icon bg-transparent"
								th:onclick="updateStatus([[${user.id}]],[[${navRoute}]],'ACTIVE',[[${status}]])">
								<i class="bi bi-unlock text-success"></i>
							</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="w-100 d-flex justify-content-center"
			th:each="i: ${#numbers.sequence(1,(lastPageNumber == 0 ? 1: lastPageNumber))}">
			<a th:text="${i}" th:href="@{/admin/__${navRoute}__/BLOCK/__${i}__}"
				class="paging" th:classappend="${page == i } ? activeli"></a>
		</div>
	</div>
	<!--  Admin-Fragment -->
</body>
</html>